# CometVisu Website - Copilot Instructions

## Project Overview

This is the **CometVisu Website** project - a Hugo-based static website for the CometVisu smarthome visualization project. The website is designed to be deployed on GitHub Pages.

## Technology Stack

- **Static Site Generator**: Hugo (v0.131.0+ extended)
- **Languages**: HTML templates (Go templates), CSS, JavaScript
- **Deployment**: GitHub Actions → GitHub Pages
- **Bilingual**: German (default) and English

## Project Structure

```
website/
├── .github/
│   └── workflows/
│       └── website.yml      # GitHub Actions deployment workflow
├── content/
│   ├── _index.md            # German content
│   └── _index.en.md         # English content
├── layouts/
│   ├── index.html           # German homepage template
│   ├── index.en.html        # English homepage template
│   └── _default/
│       └── baseof.html      # Base template
├── static/
│   ├── css/
│   │   └── style.css        # Main stylesheet
│   ├── js/
│   │   └── main.js          # JavaScript
│   └── images/
│       ├── comet_icon_512x512_ff8000.png  # Logo
│       ├── favicon.ico
│       └── tile-demo.svg
├── cometvisu/               # CometVisu submodule
├── hugo.toml                # Hugo configuration
└── README.md
```

## Configuration

### Hugo Configuration (`hugo.toml`)

Key parameters:
- `versionPath`: Determines the documentation version path
  - `"develop"` for develop branch
  - `"latest"` for master branch
- `docsBaseUrl`: Base URL for CometVisu documentation (`https://www.cometvisu.org/CometVisu`)

```toml
[params]
  versionPath = "develop"  # or "latest" for master branch
  docsBaseUrl = "https://www.cometvisu.org/CometVisu"
```

### Version Path Mapping

The `versionPath` parameter corresponds to the CometVisu submodule branch:
| Submodule Branch | versionPath |
|------------------|-------------|
| `master`         | `"latest"`  |
| `develop`        | `"develop"` |

## Color Scheme

The website uses the official CometVisu orange color scheme:

```css
:root {
    --primary: #ff8000;        /* CometVisu Orange */
    --secondary: #ffb347;      /* Light Orange */
    --bg-dark: #0d0d0d;        /* Dark Background */
    --bg-card: #1a1a1a;        /* Card Background */
    --bg-elevated: #242424;    /* Elevated Surface */
    --text-primary: #ffffff;
    --text-secondary: #a0a0a0;
    --border-color: #333333;
    --glow: rgba(255, 128, 0, 0.4);
}
```

## URL Patterns

All documentation, demo, and API links use Hugo template variables:

```html
{{- $docsBase := .Site.Params.docsBaseUrl -}}
{{- $version := .Site.Params.versionPath -}}

<!-- Documentation -->
{{ $docsBase }}/de/{{ $version }}/manual/

<!-- Demo -->
{{ $docsBase }}/de/{{ $version }}/demo/

<!-- API Viewer (English only) -->
{{ $docsBase }}/en/{{ $version }}/api/
```

### Generated URL Examples

With `versionPath = "develop"`:
- Manual: `https://www.cometvisu.org/CometVisu/de/develop/manual/`
- Demo: `https://www.cometvisu.org/CometVisu/de/develop/demo/`
- API: `https://www.cometvisu.org/CometVisu/en/develop/api/`

## External Resources

These resources are generated by the CometVisu main repository (`cometvisu/utils/ci/deploy.sh`):

1. **Manual (DE/EN)**: Sphinx documentation with screenshots
2. **Demo**: CometVisu test mode build
3. **API Viewer**: Qooxdoo API documentation (for developers)

## Development Commands

```bash
# Start development server
hugo server --port 1313 --bind 0.0.0.0

# Build for production
hugo --gc --minify

# Check CometVisu submodule branch
cd cometvisu && git branch --show-current
```

## GitHub Actions Workflow

The workflow (`.github/workflows/website.yml`) triggers on:
- Push to `main` or `develop` branches
- Manual workflow dispatch

It builds the Hugo site and deploys to GitHub Pages.

## Important Notes

### CORS Limitations

The CometVisu demo cannot be embedded in iframes due to CORS restrictions. Instead:
- Demo links open in a new tab
- Demo cards provide direct links to different demo configurations

### Language Switching

Language switch links use Hugo's `relURL` and `relLangURL` functions to work correctly when deployed in subdirectories:

```html
<!-- German to English -->
<a href="{{ "en/" | relURL }}" class="lang-switch">EN</a>

<!-- English to German -->
<a href="{{ "" | relLangURL }}" class="lang-switch">DE</a>
```

### Logo and Favicon

The official CometVisu logo is located at:
- Source: `cometvisu/source/resource/icons/comet_icon_512x512_ff8000.png`
- Website: `static/images/comet_icon_512x512_ff8000.png`

## Content Sections

The homepage includes:
1. **Hero**: Introduction with demo link
2. **Features**: Tile structure highlights
3. **Customization**: 5 levels of customization options
4. **Backends**: KNX, openHAB, MQTT integration
5. **Demo**: Links to Tile and Pure structure demos
6. **CTA**: Installation and configuration links
7. **Footer**: Documentation, Community, Project links (including API Reference)

## Best Practices

1. Always use Hugo template variables for documentation URLs
2. Update `versionPath` when switching between develop/master branches
3. Test language switching in subdirectory deployments
4. Keep demo links as external (new tab) due to CORS
5. API Viewer is placed discreetly in footer (developer-focused)
